{% extends "base.html" %}
{% load str_extensions %}
{% block title %}
Список тегов
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-12 mx-auto">
        {% with all_tags=max_disc %}

        <table class="table">
            <tbody>
             {% for tag in all_tags %}
                <tr>
                    <td><p>{{tag.user}}, только для тебя:</p>
                        <p>{{tag.discount}} % скидка в магазине {{tag.market_name}}</p>
                        <p>({{tag.priceBefore}}р) {{tag.priceAfter}}р</p>
                    </td>
                    <td><img src="{{tag.imageUrl}}" width="200"></td>
                    <td>{{tag.name}} </td>
                </tr>
              {% endfor %}
            </tbody>
        </div>
        {% endwith %}
     <table class="table">
            <tbody>
                <tr>
                    <td>

                        <div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['апрель', 'май', 'июнь', 'июль', 'август', 'сентябрь'],
      datasets: [{
        label: 'План',
        data: [1, 3, 2, 5, 8, 7],
            backgroundColor: [
      'rgba(255, 99, 132, 0.8)',
      'rgba(255, 159, 64, 0.8)',
      'rgba(255, 205, 86, 0.8)',
      'rgba(75, 192, 192, 0.8)',
      'rgba(54, 162, 235, 0.8)',
      'rgba(153, 102, 255, 0.8)',
      'rgba(201, 203, 207, 0.8)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
                    </td>
                </tr>
            </tbody>
        </div>
    </div>
</div>
{% endblock %}